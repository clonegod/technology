# 数据库底层事务操作原理

## binlog
	数据库的事务实现，依赖与事务日志
	提交：
		修改操作成功，将内存中的数据写入到磁盘

	回滚：
		读取SQL，进行逆向操作。
		如果是新增，则回滚时删除新增的记录
		如果是修改，则回滚时还原被修改的记录
		如果是删除，则回滚时还原被删除的记录

## 行锁、表锁
	凡是对记录的修改，都需要进行锁定，比如：增、删、改都会锁定被操作的行
	InnoDB支持行级锁

---
#### 批量操作的注意事项
	》》》 从数据库的方面看：
	批量INSERT,UPDATE,DELETE操作，会造成数据库表/行处于长时间锁表的状态
		---》 修改操作都需要锁定被操作的资源

	》》》 从主从binlog同步效率看：
	批量执行SQL太多，将导致大量的binlog需要同步到副本，副本会持续处理binlog进而影响从库的查询性能。




